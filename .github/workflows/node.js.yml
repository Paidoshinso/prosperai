# Workflow para CI com Node.js - VÃ¡rias etapas organizadas

name: Node.js CI

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: ["18.x", "20.x", "22.x"]  # VersÃµes do Node.js a testar

    steps:
      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # â¤ Etapa 1: Checkout do repositÃ³rio
      - name: ğŸ“¦ Checkout do cÃ³digo
        uses: actions/checkout@v4

      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # â¤ Etapa 2: Configurar Node.js e cache
      - name: ğŸ§± Configurar Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'

      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # â¤ Etapa 3: Instalar dependÃªncias
      - name: ğŸ”§ Instalar dependÃªncias (npm ci)
        run: npm ci

      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # â¤ Etapa 4: Build do projeto (opcional)
      - name: ğŸ› ï¸ Executar build (se disponÃ­vel)
        run: npm run build --if-present

      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # â¤ Etapa 5: Rodar testes
      - name: âœ… Rodar testes
        run: npm test
